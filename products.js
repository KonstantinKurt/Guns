export let products = [
    {
        'id': 1,
        'name': 'Receiver',
        'price': 1337,
        'base_part': !![],
        'category': 'Receiver',
        'attachments': {
            'Tripod': {
                'connector': 'i-1',
                'positions': [{
                    'top': 25.3,
                    'left': 1
                }]
            },
            'Grip': {
                'connector': 'i-1',
                'positions': [{
                    'top': 25,
                    'left': 37.4
                }],
                'offset': {
                    'x': 'top',
                    'y': 'left'
                }
            },
            'Suppressor': {
                'connector': 'i-1',
                'positions': [{
                    'top': 4.7,
                    'left': -18
                }]
            },
            'Stock': {
                'connector': 'i-1',
                'positions': [{
                    'top': 9.9,
                    'left': 97.4
                }]
            },
            'Scope': {
                'connector': 'i-1',
                'positions': [{
                    'top': -29,
                    'left': 67
                }]
            },
            'Laser': {
                'connector': 'i-1',
                'positions': [{
                    'top': -29,
                    'left': 20.5
                }]
            }

        },
        'image': '/images/receiver-smaller.png',
        'imageDetails': {
            'width': 1688,
            'height': 541,
            'scale': 2
        }
    },
    {
        'id': 23,
        'name': 'Receiver2',
        'price': 1337,
        'base_part': !![],
        'category': 'Receiver',
        'attachments': {
            'Tripod': {
                'connector': 'i-1',
                'positions': [{
                    'top': 25.3,
                    'left': 1
                }]
            },
            'Grip': {
                'connector': 'i-1',
                'positions': [{
                    'top': 25,
                    'left': 37.4
                }],
                'offset': {
                    'x': 'top',
                    'y': 'left'
                }
            },
            'Suppressor': {
                'connector': 'i-1',
                'positions': [{
                    'top': 4.7,
                    'left': -18
                }]
            },
            'Stock': {
                'connector': 'i-1',
                'positions': [{
                    'top': 9.9,
                    'left': 97.4
                }]
            },
            'Scope': {
                'connector': 'i-1',
                'positions': [{
                    'top': -29,
                    'left': 67
                }]
            },
            'Laser': {
                'connector': 'i-1',
                'positions': [{
                    'top': -29,
                    'left': 20.5
                }]
            }

        },
        'image': '/images/WAR SPORT_GPR-CC_PL_BLK.png',
        'imageDetails': {
            'width': 1688,
            'height': 541,
            'scale': 2
        }
    },
    {
        'id': 2,
        'name': 'Angled_Foregrip_Black',
        'price': 10,
        'base_part': ![],
        'category': 'Grip',
        'attachments': null,
        'image': '/images/grip/Angled_Foregrip_Black_Left.png',
        'imageDetails': {
            'width': 323,
            'height': 419
        }
    },
    {
        'id': 3,
        'name': 'Angled_Foregrip_Tan',
        'price': 10,
        'base_part': ![],
        'category': 'Grip',
        'attachments': null,
        'image': '/images/grip/Angled_Foregrip_Tan_Left.png',
        'imageDetails': {
            'width': 314,
            'height': 408
        }
    },
    {
        'id': 4,
        'name': 'PTS_MVG_Tan',
        'price': 10,
        'base_part': ![],
        'category': 'Grip',
        'attachments': null,
        'image': '/images/grip/PTS_MVG_Tan_Left.png',
        'imageDetails': {
            'width': 229,
            'height': 441
        }
    },
    {
        'id': 5,
        'name': 'SI_grip_red',
        'price': 10,
        'base_part': ![],
        'category': 'Grip',
        'attachments': {
            'Suppressor': {
                'connector': 'i-1',
                'positions': [{
                    'top': 4.7,
                    'left': -18
                }]
            }
        },
        'image': '/images/grip/SI_grip_red_left.png',
        'imageDetails': {
            'width': 713,
            'height': 258
        }
    },
    {
        'id': 6,
        'name': 'Laser_Black',
        'price': 10,
        'base_part': ![],
        'category': 'Laser',
        'attachments': null,
        'image': '/images/laser/Laser_Black_left\x20copy.png',
        'imageDetails': {
            'width': 512,
            'height': 363
        }
    },
    {
        'id': 7,
        'name': 'Laser_Tan',
        'price': 10,
        'base_part': ![],
        'category': 'Laser',
        'attachments': null,
        'image': '/images/laser/Laser_Tan_Left.png',
        'imageDetails': {
            'width': 512,
            'height': 363
        }
    },
    {
        'id': 8,
        'name': 'G&G_Scope',
        'price': 10,
        'base_part': ![],
        'category': 'Scope',
        'attachments': null,
        'image': '/images/scope/G_G_Scope_Left.png',
        'imageDetails': {
            'width': 943,
            'height': 363,
            'offsetX': -250
        }
    },
    {
        'id': 9,
        'name': 'Holosun',
        'price': 10,
        'base_part': ![],
        'category': 'Scope',
        'attachments': null,
        'image': '/images/scope/Holosun_Left_copy.png',
        'imageDetails': {
            'width': 512,
            'height': 363
        }
    },
    {
        'id': 10,
        'name': 'HS503CU',
        'price': 10,
        'base_part': ![],
        'category': 'Scope',
        'attachments': null,
        'image': '/images/scope/HS503CU_copy.png',
        'imageDetails': {
            'width': 512,
            'height': 363
        }
    },
    {
        'id': 11,
        'name': 'HS510',
        'price': 10,
        'base_part': ![],
        'category': 'Scope',
        'attachments': null,
        'image': '/images/scope/HS510.png',
        'imageDetails': {
            'width': 512,
            'height': 363
        }
    },
    {
        'id': 12,
        'name': 'MFT_Black',
        'price': 10,
        'base_part': ![],
        'category': 'Stock',
        'attachments': null,
        'image': '/images/stock/MFT_Black_Left\x20copy.png',
        'imageDetails': {
            'width': 1348,
            'height': 762,
            //   'offsetY': 300
            'offsetX': -3
        }
    },
    {
        'id': 13,
        'name': 'MFT_Tan',
        'price': 10,
        'base_part': ![],
        'category': 'Stock',
        'attachments': null,
        'image': '/images/stock/MFT_Tan_Left.png',
        'imageDetails': {
            'width': 1371,
            'height': 776,
            'offsetX': -5,
            'offsetY': -13
        }
    },
    {
        'id': 14,
        'name': 'PTS_EPS',
        'price': 10,
        'base_part': ![],
        'category': 'Stock',
        'attachments': null,
        'image': '/images/stock/PTS_EPS.png',
        'imageDetails': {
            'width': 1385,
            'height': 800
        }
    },
    {
        'id': 15,
        'name': 'PTS_EPS_Tan',
        'price': 10,
        'base_part': ![],
        'category': 'Stock',
        'attachments': null,
        'image': '/images/stock/PTS_EPS_Tan_Left.png',
        'imageDetails': {
            'width': 1383,
            'height': 808,
            'offsetX': -5
        }
    },
    {
        'id': 16,
        'name': 'PTS',
        'price': 10,
        'base_part': ![],
        'category': 'Suppressor',
        'attachments': null,
        'image': '/images/suppressor/PTS_Suppressor-smaller.png',
        'imageDetails': {
            'width': 433,
            'height': 111,
            'scale': 2,
            //   'offsetX': 300
        },
        'partOffset': {
            'x': 4,
            'y': 8
        }
    },
    {
        'id': 17,
        'name': 'PTS_Tan',
        'price': 10,
        'base_part': ![],
        'category': 'Suppressor',
        'attachments': null,
        'image': '/images/suppressor/PTS_Tan_Suppressor.png',
        'imageDetails': {
            'width': 890,
            'height': 250
        }
    },
    {
        'id': 18,
        'name': 'TriPod',
        'price': 10,
        'base_part': ![],
        'category': 'Tripod',
        'attachments': null,
        'image': '/images/tripod/TriPod_Left.png',
        'imageDetails': {
            'width': 1047,
            'height': 335,
            //   'offsetX': 200
        }
    }
];
export let categories = {
    'BasePart': {
        'name': 'BasePart',
        'children': []
    }
};

let mounting_points = [];

products['forEach'](product => {
    let productCategory = product['category'];
    let productAttachments = product['attachments'];
    if (product['base_part']) {
        categories['BasePart']['children']['push'](product);
    }

    if (!(productCategory in categories)) {
        categories[productCategory] = {
            'name': productCategory,
            'children': [product]
        };
    } else {
        categories[productCategory]['children']['push'](product);

    }

    product['category'] = categories[productCategory];
    if (productAttachments && product['base_part']) {
        Object['keys'](productAttachments)['forEach'](category => {

            let categoriesAttachments = productAttachments[category];

            if (!(category in categories)) {
                categories[category] = {
                    'name': category,
                    'children': []
                };
            }
            categoriesAttachments['elem'] = null;
            categoriesAttachments['positioned'] = 0;
            categoriesAttachments['parent'] = product;
            categoriesAttachments['category'] = categories[category];
            mounting_points['push'](categoriesAttachments);
        });
    }
});
export let customProduct = categories['BasePart']['children'][0];
console.log(categories)
export {
    mounting_points
}